{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <h1 class="main-header">{{ title }}</h1>

    <div class="row mb-3">
        <div class="col-md-3">
            <div class="card text-center bg-light">
                <div class="card-body">
                    <h2 class="display-6">{{ stat.total }}</h2>
                    <p class="text-muted mb-0">–í—Å–µ–≥–æ –≤–∞–∫–∞–Ω—Å–∏–π</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-light">
                <div class="card-body">
                    <h2 class="display-6">{{ stat.with_salary }}</h2>
                    <p class="text-muted mb-0">–° —É–∫–∞–∑–∞–Ω–Ω–æ–π –ó–ü</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-light">
                <div class="card-body">
                    <h2 class="display-6">{{ stat.avg_salary }} ‚ÇΩ</h2>
                    <p class="text-muted mb-0">–°—Ä–µ–¥–Ω—è—è –∑–∞—Ä–ø–ª–∞—Ç–∞</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-light">
                <div class="card-body">
                    <h2 class="display-6">{{ stat.min_salary }} ‚ÇΩ</h2>
                    <p class="text-muted mb-0">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ó–ü</p>
                </div>
            </div>
        </div>
    </div>

    {% if stat.all_insights %}
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        {% for insight in stat.all_insights %}
                        <div class="col-md-6 mb-3">
                            <div class="card h-100 border-left-success border-left-3">
                                <div class="card-body">
                                    <h6 class="card-title text-success">
                                        {{ insight.title }}
                                    </h6>
                                    <p class="card-text">{{ insight.description }}</p>
                                    {% if insight.value %}
                                    <div class="mt-2">
                                        <span class="badge bg-success">
                                            {{ insight.value }} {{ insight.unit }}
                                        </span>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç</h5>

                </div>
                <div class="card-body">
                    {% if stat.salary_distribution %}
                    <img src="data:image/png;base64,{{ stat.salary_distribution }}"
                         alt="–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—Ä–ø–ª–∞—Ç" class="img-fluid mb-4">

                    {% if stat.salary_distribution_insights %}
                    <div class="insights-section mt-4">
                        <h6>–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?</h6>
                        <div class="row">
                            {% for insight in stat.salary_distribution_insights %}
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ insight.title }}</h6>
                                        <p class="card-text small">{{ insight.description }}</p>
                                        {% if insight.details %}
                                        <p class="card-text"><small class="text-muted">{{ insight.details }}</small></p>
                                        {% endif %}
                                        {% if insight.recommendation %}
                                        <div class="alert alert-light mt-2 p-2">
                                            <small><strong>üí° –°–æ–≤–µ—Ç:</strong> {{ insight.recommendation }}</small>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    {% else %}
                    <p class="text-muted">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">–û–ø—ã—Ç –∫ –∑–∞—Ä–ø–ª–∞—Ç–µ</h5>

                </div>
                <div class="card-body">
                    {% if stat.experience_chart %}
                    <img src="data:image/png;base64,{{ stat.experience_chart }}"
                         alt="–ó–∞—Ä–ø–ª–∞—Ç–∞ –ø–æ –æ–ø—ã—Ç—É" class="img-fluid mb-4">


                    {% if stat.experience_insights %}
                    <div class="insights-section mt-4">
                        <h6>–ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –æ–ø—ã—Ç–∞:</h6>
                        <div class="row">
                            {% for insight in stat.experience_insights %}
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ insight.title }}</h6>
                                        <p class="card-text small">{{ insight.description }}</p>
                                        {% if insight.details %}
                                        <p class="card-text"><small class="text-muted">{{ insight.details }}</small></p>
                                        {% endif %}
                                        {% if insight.recommendation %}
                                        <div class="alert alert-light mt-2 p-2">
                                            <small><strong>üí° –°–æ–≤–µ—Ç:</strong> {{ insight.recommendation }}</small>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    {% else %}
                    <p class="text-muted">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>


    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º</h5>

                </div>
                <div class="card-body">
                    {% if stat.platform_comparison %}
                    <img src="data:image/png;base64,{{ stat.platform_comparison }}"
                         alt="–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º" class="img-fluid mb-4">

                    {% if stat.platform_insights %}
                    <div class="insights-section mt-4">
                        <h6>–ì–¥–µ –∏—Å–∫–∞—Ç—å —Ä–∞–±–æ—Ç—É?</h6>
                        <div class="row">
                            {% for insight in stat.platform_insights %}
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ insight.title }}</h6>
                                        <p class="card-text small">{{ insight.description }}</p>
                                        {% if insight.details %}
                                        <p class="card-text"><small class="text-muted">{{ insight.details }}</small></p>
                                        {% endif %}
                                        {% if insight.recommendation %}
                                        <div class="alert alert-light mt-2 p-2">
                                            <small><strong>üí° –°–æ–≤–µ—Ç:</strong> {{ insight.recommendation }}</small>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    {% else %}
                    <p class="text-muted">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">–í–ª–∏—è–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç—É</h5>

                </div>
                <div class="card-body">
                    {% if stat.education_charts %}
                    <img src="data:image/png;base64,{{ stat.education_charts }}"
                         alt="–í–ª–∏—è–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è" class="img-fluid mb-4">


                    {% if stat.education_insights %}
                    <div class="insights-section mt-4">
                        <h6>–ö–∞–∫ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç—É?</h6>
                        <div class="row">
                            {% for insight in stat.education_insights %}
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body">
                                        <h6 class="card-title">{{ insight.title }}</h6>
                                        <p class="card-text small">{{ insight.description }}</p>
                                        {% if insight.details %}
                                        <p class="card-text"><small class="text-muted">{{ insight.details }}</small></p>
                                        {% endif %}
                                        {% if insight.recommendation %}
                                        <div class="alert alert-light mt-2 p-2">
                                            <small><strong>üí° –°–æ–≤–µ—Ç:</strong> {{ insight.recommendation }}</small>
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}


                    {% else %}
                    <p class="text-muted">–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>



            <div class="row mb-4">
                <div class="col-md-4 mb-3">
                            <div class="card h-100 border-success">
                                <div class="card-body text-center">
                                    <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                                    <h5 class="card-title">–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑</h5>
                                    <p class="card-text small text-muted">
                                        –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è –æ–ø—ã—Ç–∞, –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –∑–∞—Ä–ø–ª–∞—Ç—É
                                    </p>
                                    <a href="{% url 'regression_analysis' %}" class="btn btn-outline-success">
                                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–Ω–∞–ª–∏–∑—É
                                    </a>
                                </div>
                            </div>
                        </div>

                <div class="col-md-4 mb-3">
                            <div class="card h-100 border-success">
                                <div class="card-body text-center">
                                    <i class="fas fa-project-diagram fa-3x text-success mb-3"></i>
                                    <h5 class="card-title">–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑</h5>
                                    <p class="card-text small text-muted">
                                        –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ –≤–∞–∫–∞–Ω—Å–∏–π
                                    </p>
                                    <a href="{% url 'correlation_analysis' %}" class="btn btn-outline-success">
                                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–Ω–∞–ª–∏–∑—É
                                    </a>
                                </div>
                            </div>
                    </div>

                <div class="col-md-4 mb-3">
                            <div class="card h-100 border-success">
                                <div class="card-body text-center">
                                    <i class="fas fa-project-diagram fa-3x text-success mb-3"></i>
                                    <h5 class="card-title">–î–µ—Ä–µ–≤—å—è —Ä–µ—à–µ–Ω–∏–π</h5>
                                    <p class="card-text small text-muted">
                                        –ê–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–µ—Ä–µ–≤—å–µ–≤ —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—Ä–ø–ª–∞—Ç—ã
                                    </p>
                                    <a href="{% url 'decision_tree_analysis' %}" class="btn btn-outline-success">
                                        –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–Ω–∞–ª–∏–∑—É
                                    </a>
                                </div>
                            </div>
                    </div>

                </div>





</div>
{% endblock %}